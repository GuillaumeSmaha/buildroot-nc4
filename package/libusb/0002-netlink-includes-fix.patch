diff -rbu a/configure.ac b/configure.ac
--- a/configure.ac	2020-12-10 04:53:11.000000000 +0100
+++ b/configure.ac	2022-03-08 22:09:29.442009059 +0100
@@ -178,7 +178,7 @@
 		AC_CHECK_LIB([udev], [udev_new], [], [AC_MSG_ERROR([udev support requested but libudev not installed])])
 	else
 		AC_CHECK_HEADERS([asm/types.h])
-		AC_CHECK_HEADER([linux/netlink.h], [], [AC_MSG_ERROR([Linux netlink header not found])])
+		AC_CHECK_HEADER([linux/netlink.h], [], [AC_MSG_ERROR([Linux netlink header not found])], [#include <sys/socket.h>])
 		AC_CHECK_HEADER([sys/socket.h], [], [AC_MSG_ERROR([Linux socket header not found])])
 	fi
 	;;
diff -rbu a/libusb/os/linux_netlink.c b/libusb/os/linux_netlink.c
--- a/libusb/os/linux_netlink.c	2020-08-13 03:50:39.000000000 +0200
+++ b/libusb/os/linux_netlink.c	2022-03-08 22:09:42.882148133 +0100
@@ -34,8 +34,8 @@
 #ifdef HAVE_ASM_TYPES_H
 #include <asm/types.h>
 #endif
-#include <linux/netlink.h>
 #include <sys/socket.h>
+#include <linux/netlink.h>
 
 #define NL_GROUP_KERNEL 1
 
